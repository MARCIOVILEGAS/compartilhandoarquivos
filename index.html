<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Upload e Download de Arquivos com Firebase</title>
</head>
<body>
    <h1>Upload de Arquivos</h1>
    
    <input type="file" id="fileInput">
    <button onclick="uploadFile()">Upload</button>

    <h2>Arquivos Disponíveis para Download</h2>
    <div id="fileList"></div>

    <!-- Firebase SDKs -->
    <!-- Firebase App (base SDK) -->
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>

    <!-- Firebase Storage SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-storage.js"></script>

    <script>
        // Configuração do Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyDh-We-SNGOdjqBmt79Yuj19oRRvSG8zWI",
            authDomain: "video-do-computador-e-notebook.firebaseapp.com",
            projectId: "video-do-computador-e-notebook",
            storageBucket: "video-do-computador-e-notebook.appspot.com",
            messagingSenderId: "246060946539",
            appId: "1:246060946539:web:5c4afc8b95b3441d8b4d2e"
        };

        // Inicializar Firebase
        const app = firebase.initializeApp(firebaseConfig);
        const storage = firebase.storage();

        // Função para fazer o upload do arquivo
        function uploadFile() {
            const file = document.getElementById('fileInput').files[0];
            const storageRef = storage.ref('uploads/' + file.name);

            storageRef.put(file).then((snapshot) => {
                alert('Upload concluído!');
                listarArquivos();
            });
        }

        // Função para listar os arquivos e gerar links de download
        function listarArquivos() {
            const storageRef = storage.ref('uploads/');
            const fileList = document.getElementById('fileList');
            fileList.innerHTML = ''; // Limpa a lista anterior

            storageRef.listAll().then((result) => {
                result.items.forEach((fileRef) => {
                    fileRef.getDownloadURL().then((url) => {
                        const a = document.createElement('a');
                        a.href = url;
                        a.textContent = fileRef.name;
                        a.download = fileRef.name;
                        fileList.appendChild(a);
                        fileList.appendChild(document.createElement('br'));
                    });
                });
            });
        }

        // Listar arquivos ao carregar a página
        window.onload = listarArquivos;
    </script>
</body>
</html>
